<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¿ƒçµç»¿æ´² - å¿ƒç†å‡å‹å°æ¸¸æˆ</title>
    <style>
        â–ª {

            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #e0f7fa 0%, #bbdefb 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: #333;
        }
        
        .container {
            width: 100%;
            max-width: 800px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(90deg, #4fc3f7 0%, #29b6f6 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .tabs {
            display: flex;
            background: #e1f5fe;
            border-bottom: 1px solid #b3e5fc;
        }
        
        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            color: #0288d1;
        }
        
        .tab.active {
            background: #4fc3f7;
            color: white;
        }
        
        .tab:hover:not(.active) {
            background: #b3e5fc;
        }
        
        .content {
            padding: 30px;
            min-height: 400px;
        }
        
        .page {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .page.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* å‘¼å¸ç»ƒä¹ æ ·å¼ */
        .breath-container {
            text-align: center;
        }
        
        .breath-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: #e1f5fe;
            margin: 30px auto;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .breath-text {
            font-size: 24px;
            font-weight: bold;
            color: #0288d1;
            z-index: 2;
        }
        
        .pulse {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: #4fc3f7;
            opacity: 0.3;
            transform: scale(0);
            animation: none;
        }
        
        .pulse.inhale {
            animation: pulseIn 4s infinite;
        }
        
        .pulse.exhale {
            animation: pulseOut 4s infinite;
        }
        
        @keyframes pulseIn {
            0% { transform: scale(0); opacity: 0.3; }
            50% { transform: scale(1); opacity: 0.1; }
            100% { transform: scale(1); opacity: 0; }
        }
        
        @keyframes pulseOut {
            0% { transform: scale(1); opacity: 0.1; }
            50% { transform: scale(0); opacity: 0.3; }
            100% { transform: scale(0); opacity: 0; }
        }
        
        .breath-controls {
            margin-top: 20px;
        }
        
        button {
            background: #0288d1;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            margin: 0 10px;
        }
        
        button:hover {
            background: #01579b;
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
        }
        
        button:disabled {
            background: #b3e5fc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        /* æƒ…ç»ªæ—¥è®°æ ·å¼ */
        .mood-selector {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }
        
        .mood-option {
            text-align: center;
            cursor: pointer;
            padding: 10px;
            border-radius: 10px;
            transition: all 0.3s;
        }
        
        .mood-option:hover {
            background: #e1f5fe;
        }
        
        .mood-option.active {
            background: #b3e5fc;
            transform: scale(1.1);
        }
        
        .mood-emoji {
            font-size: 40px;
            margin-bottom: 5px;
        }
        
        textarea {
            width: 100%;
            height: 120px;
            padding: 15px;
            border: 1px solid #b3e5fc;
            border-radius: 10px;
            resize: none;
            font-size: 16px;
            margin: 15px 0;
        }
        
        /* è§£å‹æ¸¸æˆæ ·å¼ */
        .bubble-container {
            position: relative;
            height: 300px;
            border: 2px dashed #b3e5fc;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
            background: linear-gradient(to bottom, #e3f2fd 0%, #f3e5f5 100%);
        }
        
        .bubble {
            position: absolute;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: inset 0 -5px 10px rgba(255, 255, 255, 0.5), 
                        0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .bubble:hover {
            transform: scale(1.1);
        }
        
        .bubble::after {
            content: '';
            position: absolute;
            top: 20%;
            left: 20%;
            width: 15%;
            height: 15%;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            font-size: 18px;
        }
        
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>å¿ƒçµç»¿æ´²</h1>
            <div class="subtitle">å¤§å­¦ç”Ÿå¿ƒç†å‡å‹ä¸æ­£å¿µç»ƒä¹ ç©ºé—´</div>
        </header>
        
        <div class="tabs">
            <div class="tab active" data-tab="breath">æ­£å¿µå‘¼å¸</div>
            <div class="tab" data-tab="mood">æƒ…ç»ªæ—¥è®°</div>
            <div class="tab" data-tab="game">è§£å‹æ³¡æ³¡</div>
           
        </div>
        
        <div class="content">
            <!-- æ­£å¿µå‘¼å¸é¡µé¢ -->
            <div class="page active" id="breath-page">
                <div class="breath-container">
                    <h2>æ­£å¿µå‘¼å¸ç»ƒä¹ </h2>
                    <p>è·ŸéšåŠ¨ç”»è¿›è¡Œæ·±å‘¼å¸ï¼Œæ”¾æ¾èº«å¿ƒ</p>
                    
                    <div class="breath-circle">
                        <div class="breath-text" id="breath-instruction">å¸æ°”</div>
                        <div class="pulse" id="pulse"></div>
                    </div>
                    
                    <div class="breath-controls">
                        <button id="start-breath">å¼€å§‹ç»ƒä¹ </button>
                        <button id="pause-breath" disabled>æš‚åœ</button>
                        <button id="reset-breath">é‡ç½®</button>
                    </div>
                    
                    <div class="mindful-tip">
                        <p>æç¤ºï¼šå°è¯•å°†æ³¨æ„åŠ›å®Œå…¨é›†ä¸­åœ¨å‘¼å¸ä¸Šï¼Œæ„Ÿå—ç©ºæ°”è¿›å…¥å’Œç¦»å¼€èº«ä½“çš„æ„Ÿè§‰ã€‚</p>
                    </div>
                </div>
            </div>
            
            <!-- æƒ…ç»ªæ—¥è®°é¡µé¢ -->
            <div class="page" id="mood-page">
                <h2>æƒ…ç»ªæ—¥è®°</h2>
                <p>è®°å½•ä½ å½“ä¸‹çš„æƒ…ç»ªçŠ¶æ€</p>
                
                <div class="mood-selector">
                    <div class="mood-option" data-mood="happy">
                        <div class="mood-emoji">ğŸ˜Š</div>
                        <div>å¼€å¿ƒ</div>
                    </div>
                    <div class="mood-option" data-mood="calm">
                        <div class="mood-emoji">ğŸ˜Œ</div>
                        <div>å¹³é™</div>
                    </div>
                    <div class="mood-option" data-mood="sad">
                        <div class="mood-emoji">ğŸ˜”</div>
                        <div>éš¾è¿‡</div>
                    </div>
                    <div class="mood-option" data-mood="anxious">
                        <div class="mood-emoji">ğŸ˜°</div>
                        <div>ç„¦è™‘</div>
                    </div>
                    <div class="mood-option" data-mood="angry">
                        <div class="mood-emoji">ğŸ˜ </div>
                        <div>ç”Ÿæ°”</div>
                    </div>
                </div>
                
                <textarea id="mood-text" placeholder="å¯ä»¥åœ¨è¿™é‡Œè®°å½•è®©ä½ äº§ç”Ÿè¿™ç§æƒ…ç»ªçš„äº‹æƒ…ï¼Œæˆ–è€…ä»»ä½•ä½ æƒ³è¡¨è¾¾çš„æƒ³æ³•..."></textarea>
                
                <button id="save-mood">ä¿å­˜è®°å½•</button>
                
                <div class="history-list" id="mood-history">
                    <h3>æƒ…ç»ªè®°å½•å†å²</h3>
                    <div id="history-items"></div>
                </div>
            </div>
            
            <!-- è§£å‹æ¸¸æˆé¡µé¢ -->
            <div class="page" id="game-page">
                <h2>è§£å‹æ³¡æ³¡</h2>
                <p>ç‚¹å‡»æ³¡æ³¡é‡Šæ”¾å‹åŠ›ï¼Œäº«å—å³æ—¶çš„æ»¡è¶³æ„Ÿ</p>
                
                <div class="bubble-container" id="bubble-container">
                    <!-- æ³¡æ³¡å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <div class="stats">
                    <div>å·²ç‚¹å‡»: <span id="bubbles-popped">0</span> ä¸ªæ³¡æ³¡</div>
                    <div>å‰©ä½™: <span id="bubbles-left">20</span> ä¸ªæ³¡æ³¡</div>
                </div>
                
                <button id="reset-bubbles">é‡æ–°å¼€å§‹</button>
                <button id="toggle-movement">æš‚åœæµ®åŠ¨</button>
            </div>
    <script>
        // æ ‡ç­¾é¡µåˆ‡æ¢åŠŸèƒ½
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                // ç§»é™¤æ‰€æœ‰æ´»è·ƒçŠ¶æ€
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                
                // æ·»åŠ å½“å‰æ´»è·ƒçŠ¶æ€
                tab.classList.add('active');
                const tabId = tab.getAttribute('data-tab');
                document.getElementById(`${tabId}-page`).classList.add('active');
            });
        });
        
        // æ­£å¿µå‘¼å¸åŠŸèƒ½
        const breathText = document.getElementById('breath-instruction');
        const pulse = document.getElementById('pulse');
        const startBtn = document.getElementById('start-breath');
        const pauseBtn = document.getElementById('pause-breath');
        const resetBtn = document.getElementById('reset-breath');
        
        let breathInterval;
        let isBreathing = false;
        let isInhale = true;
        let breathCounter = 0;
        
        startBtn.addEventListener('click', startBreathing);
        pauseBtn.addEventListener('click', pauseBreathing);
        resetBtn.addEventListener('click', resetBreathing);
        
        function startBreathing() {
            if (isBreathing) return;
            
            isBreathing = true;
            startBtn.disabled = true;
            pauseBtn.disabled = false;
            
            breathText.textContent = "å¸æ°”";
            pulse.classList.add('inhale');
            pulse.classList.remove('exhale');
            
            breathInterval = setInterval(() => {
                if (isInhale) {
                    breathText.textContent = "å‘¼æ°”";
                    pulse.classList.remove('inhale');
                    pulse.classList.add('exhale');
                    isInhale = false;
                } else {
                    breathText.textContent = "å¸æ°”";
                    pulse.classList.remove('exhale');
                    pulse.classList.add('inhale');
                    isInhale = true;
                    breathCounter++;
                    
                    // æ¯4æ¬¡å‘¼å¸æ˜¾ç¤ºé¼“åŠ±ä¿¡æ¯
                    if (breathCounter % 4 === 0) {
                        showTemporaryMessage("åšå¾—å¾ˆå¥½ï¼ç»§ç»­å…³æ³¨ä½ çš„å‘¼å¸ã€‚");
                    }
                }
            }, 4000);
        }
        
        function pauseBreathing() {
            isBreathing = false;
            startBtn.disabled = false;
            pauseBtn.disabled = true;
            clearInterval(breathInterval);
            pulse.classList.remove('inhale', 'exhale');
            breathText.textContent = "å·²æš‚åœ";
        }
        
        function resetBreathing() {
            pauseBreathing();
            breathCounter = 0;
            isInhale = true;
            breathText.textContent = "å¸æ°”";
            pulse.classList.remove('inhale', 'exhale');
        }
        
        // æƒ…ç»ªæ—¥è®°åŠŸèƒ½
        const moodOptions = document.querySelectorAll('.mood-option');
        const moodText = document.getElementById('mood-text');
        const saveMoodBtn = document.getElementById('save-mood');
        const historyItems = document.getElementById('history-items');
        
        let selectedMood = '';
        let moodHistory = JSON.parse(localStorage.getItem('moodHistory')) || [];
        
        moodOptions.forEach(option => {
            option.addEventListener('click', () => {
                moodOptions.forEach(o => o.classList.remove('active'));
                option.classList.add('active');
                selectedMood = option.getAttribute('data-mood');
            });
        });
        
        saveMoodBtn.addEventListener('click', saveMood);
        
        function saveMood() {
            if (!selectedMood) {
                alert('è¯·å…ˆé€‰æ‹©ä¸€ç§æƒ…ç»ª');
                return;
            }
            
            const moodEntry = {
                mood: selectedMood,
                text: moodText.value,
                date: new Date().toLocaleString()
            };
            
            moodHistory.unshift(moodEntry);
            localStorage.setItem('moodHistory', JSON.stringify(moodHistory));
            
            updateMoodHistory();
            moodText.value = '';
            moodOptions.forEach(o => o.classList.remove('active'));
            selectedMood = '';
            
            showTemporaryMessage('æƒ…ç»ªè®°å½•å·²ä¿å­˜ï¼');
        }
        
        function updateMoodHistory() {
            historyItems.innerHTML = '';
            
            if (moodHistory.length === 0) {
                historyItems.innerHTML = '<p>è¿˜æ²¡æœ‰æƒ…ç»ªè®°å½•</p>';
                return;
            }
            
            moodHistory.forEach(entry => {
                const emojiMap = {
                    'happy': 'ğŸ˜Š',
                    'calm': 'ğŸ˜Œ',
                    'sad': 'ğŸ˜”',
                    'anxious': 'ğŸ˜°',
                    'angry': 'ğŸ˜ '
                };
                
                const item = document.createElement('div');
                item.className = 'history-item';
                item.innerHTML = `
                    <div style="display: flex; justify-content: space-between;">
                        <span>${emojiMap[entry.mood]} ${entry.date}</span>
                    </div>
                    <div style="margin-top: 5px; color: #666;">${entry.text || 'æ— é¢å¤–è®°å½•'}</div>
                `;
                historyItems.appendChild(item);
            });
        }
        
        // åˆå§‹åŒ–æ—¶æ›´æ–°æƒ…ç»ªå†å²
        updateMoodHistory();
        
        // è§£å‹æ³¡æ³¡æ¸¸æˆ - å¢å¼ºç‰ˆ
        const bubbleContainer = document.getElementById('bubble-container');
        const bubblesPopped = document.getElementById('bubbles-popped');
        const bubblesLeft = document.getElementById('bubbles-left');
        const resetBubblesBtn = document.getElementById('reset-bubbles');
        const toggleMovementBtn = document.getElementById('toggle-movement');
        
        let poppedCount = 0;
        let totalBubbles = 20;
        let bubbles = [];
        let isMoving = true;
        let animationId;
        
        // æ·»åŠ æµ®åŠ¨æ§åˆ¶æŒ‰é’®äº‹ä»¶
        toggleMovementBtn.addEventListener('click', toggleBubbleMovement);
        resetBubblesBtn.addEventListener('click', initBubbles);
        
        function toggleBubbleMovement() {
            isMoving = !isMoving;
            toggleMovementBtn.textContent = isMoving ? 'æš‚åœæµ®åŠ¨' : 'å¼€å§‹æµ®åŠ¨';
            
            if (isMoving) {
                startBubbleMovement();
            } else {
                cancelAnimationFrame(animationId);
            }
        }
        
        function createBubble() {
            const bubble = document.createElement('div');
            bubble.className = 'bubble';
            
            const size = Math.floor(Math.random() * 60) + 30;
            const colors = [
                'rgba(79, 195, 247, 0.7)', 
                'rgba(129, 212, 250, 0.7)', 
                'rgba(41, 182, 246, 0.7)', 
                'rgba(3, 169, 244, 0.7)', 
                'rgba(2, 136, 209, 0.7)'
            ];
            const color = colors[Math.floor(Math.random() * colors.length)];
            
            // éšæœºåˆå§‹ä½ç½®
            const left = Math.random() * (bubbleContainer.offsetWidth - size);
            const top = Math.random() * (bubbleContainer.offsetHeight - size);
            
            bubble.style.width = `${size}px`;
            bubble.style.height = `${size}px`;
            bubble.style.background = color;
            bubble.style.left = `${left}px`;
            bubble.style.top = `${top}px`;
            
            // ä¸ºæ¯ä¸ªæ³¡æ³¡æ·»åŠ éšæœºè¿åŠ¨å‚æ•°
            const bubbleData = {
                element: bubble,
                x: left,
                y: top,
                vx: (Math.random() - 0.5) * 2, // éšæœºæ°´å¹³é€Ÿåº¦
                vy: (Math.random() - 0.5) * 2, // éšæœºå‚ç›´é€Ÿåº¦
                size: size,
                amplitude: Math.random() * 2 + 1, // æ³¢åŠ¨å¹…åº¦
                frequency: Math.random() * 0.02 + 0.01, // æ³¢åŠ¨é¢‘ç‡
                time: Math.random() * 100 // åˆå§‹æ—¶é—´åç§»
            };
            
            bubble.addEventListener('click', () => {
                // æ³¡æ³¡çˆ†ç‚¸æ•ˆæœ
                bubble.style.transition = 'all 0.2s';
                bubble.style.transform = 'scale(1.5)';
                bubble.style.opacity = '0';
                
                setTimeout(() => {
                    // ä»bubblesæ•°ç»„ä¸­ç§»é™¤
                    bubbles = bubbles.filter(b => b.element !== bubble);
                    bubble.remove();
                    poppedCount++;
                    bubblesPopped.textContent = poppedCount;
                    bubblesLeft.textContent = totalBubbles - poppedCount;
                    
                    // æ’­æ”¾æ³¡æ³¡éŸ³æ•ˆï¼ˆæ¨¡æ‹Ÿï¼‰
                    const popSound = new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA');
                    popSound.volume = 0.1;
                    popSound.play().catch(e => console.log("Audio play failed:", e));
                    
                    // å¦‚æœæ‰€æœ‰æ³¡æ³¡éƒ½è¢«ç‚¹å‡»äº†ï¼Œåˆ›å»ºæ–°ä¸€æ‰¹
                    if (poppedCount >= totalBubbles) {
                        setTimeout(initBubbles, 1000);
                    }
                }, 200);
            });
            
            bubbleContainer.appendChild(bubble);
            bubbles.push(bubbleData);
        }
        
        function updateBubblePositions() {
            bubbles.forEach(bubble => {
                bubble.time += 0.05;
                
                // ä½¿ç”¨æ­£å¼¦æ³¢åˆ›å»ºè‡ªç„¶æµ®åŠ¨æ•ˆæœ
                const waveOffset = Math.sin(bubble.time * bubble.frequency) * bubble.amplitude;
                
                // æ›´æ–°ä½ç½®
                bubble.x += bubble.vx;
                bubble.y += bubble.vy + waveOffset;
                
                // è¾¹ç•Œæ£€æµ‹ - ç¢°åˆ°è¾¹ç•Œæ—¶åå¼¹
                if (bubble.x <= 0 || bubble.x >= bubbleContainer.offsetWidth - bubble.size) {
                    bubble.vx *= -1;
                    bubble.x = Math.max(0, Math.min(bubble.x, bubbleContainer.offsetWidth - bubble.size));
                }
                
                if (bubble.y <= 0 || bubble.y >= bubbleContainer.offsetHeight - bubble.size) {
                    bubble.vy *= -1;
                    bubble.y = Math.max(0, Math.min(bubble.y, bubbleContainer.offsetHeight - bubble.size));
                }
                
                // åº”ç”¨æ–°ä½ç½®
                bubble.element.style.left = `${bubble.x}px`;
                bubble.element.style.top = `${bubble.y}px`;
            });
        }
        
        function animateBubbles() {
            if (isMoving) {
                updateBubblePositions();
                animationId = requestAnimationFrame(animateBubbles);
            }
        }
        
        function startBubbleMovement() {
            if (isMoving) {
                animateBubbles();
            }
        }
        
        function initBubbles() {
            // æ¸…ç©ºå®¹å™¨å’Œæ³¡æ³¡æ•°ç»„
            bubbleContainer.innerHTML = '';
            bubbles = [];
            poppedCount = 0;
            bubblesPopped.textContent = '0';
            bubblesLeft.textContent = totalBubbles;
            
            // åˆ›å»ºæ–°æ³¡æ³¡
            for (let i = 0; i < totalBubbles; i++) {
                createBubble();
            }
            
            // å¼€å§‹åŠ¨ç”»
            if (isMoving) {
                startBubbleMovement();
            }
        }
        
        // åˆå§‹åŒ–æ³¡æ³¡æ¸¸æˆ
        initBubbles();
        
        // æ·»åŠ CSSåŠ¨ç”»
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeInOut {
                0% { opacity: 0; transform: translateY(-20px); }
                20% { opacity: 1; transform: translateY(0); }
                80% { opacity: 1; transform: translateY(0); }
                100% { opacity: 0; transform: translateY(-20px); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
